<!DOCTYPE html>
<html>
	<head>
		<title>Simple Simon</title>
		<meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="css/SimpleSimon.css">
	</head>
	<body>
        <button type="submit" id="start">START</button>
        <div id="gameOver">GAME OVER</div>
		<section class="gameContainer">
			<div class="arrowButtons"></div>
			<div class="arrowButtons button" id="topButton"></div>
			<div class="arrowButtons"></div>
			<div class="arrowButtons button" id="leftButton"></div>
			<div class="arrowButtons"></div>
			<div class="arrowButtons button" id="rightButton"></div>
			<div class="arrowButtons"></div>
			<div class="arrowButtons button" id="downButton"></div>
			<div class="arrowButtons"></div>
		</section>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    	<script>
    	$(document).ready(function(){
    		$("#start").click(function(){
            $("#start").fadeOut(1000);
               
            var sequenceArray = [];

    		function getRandomNumberBetween0And(){
                
                var num = Math.floor(Math.random() * 4);
                console.log(num);
    		  	return num;
    		}
    
    		  
    		function animate(element){
    		  	
                $(element).animate({
    		  		opacity: .20
        
    		  	}, 500).animate({
    		  			opacity: 1
                       
    		  	});
    		}
    
                function gameover(){
                   
                    $("#gameOver").addClass('fadeIn');
                    sequenceArray = [];
                    $("#start").fadeIn(5000);
                }
    
                var counter = 0;
    
                function compareMove(usersTurn){
                    
                    console.log("users turn: " + usersTurn);
                    console.log("sequence: " + sequenceArray[counter]);
                    
                    if (usersTurn != sequenceArray[counter]){
                       
                       gameover();
                       // counter = 0;
                       sequenceArray = [];

                   } else {
                        if(counter == sequenceArray.length -1){
                            
                            console.log(usersTurn);
                            counter = 0;
                            simonsArray();

                        }else{

                           counter++;
                        }
                    }
                }

                function simonsArray(input){
                    var squares = ["topButton", "rightButton", "downButton", "leftButton"]; 
            
                    var randomIndex = getRandomNumberBetween0And();
                
                    var randomSquare = squares[randomIndex];
            
                    console.log(randomSquare);
            
                    sequenceArray.push(randomSquare);
            
                    var i = 0;
                    var intervalId = setInterval(function(){
                        
                        switch (sequenceArray[i]){
                            case "topButton": 
                                animate('#topButton');
                                break;
                            case "rightButton":
                                animate('#rightButton');
                                break;
                            case "downButton":
                                animate('#downButton');
                                break;
                            case "leftButton":
                                animate('#leftButton');
                                break;
                        }
            
                        if(i < sequenceArray.length){
                            
                            i++;
    
                        } else {
    
                            clearInterval(intervalId);
                        }
    
                    }, 1000);
                }
        
                simonsArray();
    
                $(".button").click(function(){
                   
                    animate("#" + $(this).attr("id"));
                    compareMove($(this).attr("id"));
    
                    console.log();
                });
            });
    	});
    	</script>
	</body>
</html>
       